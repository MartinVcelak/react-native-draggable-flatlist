{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_animatedValueContext","_draggableFlatListContext","_refContext","_utils","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","PlaceholderItem","_ref","_propsRef$current","renderPlaceholder","_useState","useState","_useState2","_slicedToArray2","size","setSize","_useAnimatedValues","useAnimatedValues","activeCellSize","placeholderOffset","spacerIndexAnim","horizontalAnim","scrollOffset","_useRefs","useRefs","keyToIndexRef","propsRef","_useDraggableFlatList","useDraggableFlatListContext","activeKey","horizontal","useAnimatedReaction","_f","value","_closure","asString","__workletHash","__location","cur","prev","runOnJS","activeIndex","current","undefined","activeItem","data","animStyle","useAnimatedStyle","offset","opacity","overflow","transform","translateX","translateY","__optimalization","extraStyle","useMemo","width","height","createElement","View","pointerEvents","style","StyleSheet","absoluteFill","__self","__source","fileName","lineNumber","columnNumber","item","index","_default","exports","typedMemo"],"sources":["PlaceholderItem.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { useAnimatedValues } from \"../context/animatedValueContext\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { RenderPlaceholder } from \"../types\";\nimport { typedMemo } from \"../utils\";\n\ntype Props<T> = {\n  renderPlaceholder?: RenderPlaceholder<T>;\n};\n\nfunction PlaceholderItem<T>({ renderPlaceholder }: Props<T>) {\n  const [size, setSize] = useState(0);\n  const {\n    activeCellSize,\n    placeholderOffset,\n    spacerIndexAnim,\n    horizontalAnim,\n    scrollOffset,\n  } = useAnimatedValues();\n  const { keyToIndexRef, propsRef } = useRefs<T>();\n  const { activeKey, horizontal } = useDraggableFlatListContext();\n\n  // Size does not seem to be respected when it is an animated style\n  useAnimatedReaction(\n    () => {\n      return activeCellSize.value;\n    },\n    (cur, prev) => {\n      if (cur !== prev) {\n        runOnJS(setSize)(cur);\n      }\n    }\n  );\n\n  const activeIndex = activeKey\n    ? keyToIndexRef.current.get(activeKey)\n    : undefined;\n  const activeItem =\n    activeIndex === undefined ? null : propsRef.current?.data[activeIndex];\n\n  const animStyle = useAnimatedStyle(() => {\n    const offset = placeholderOffset.value - scrollOffset.value\n    return {\n        opacity: size >= 0 ? 1 : 0,\n        overflow: 'hidden',\n        transform: [\n          horizontalAnim.value\n            ? { translateX: offset }\n            : { translateY: offset },\n        ],\n      };\n\n  }, [spacerIndexAnim, placeholderOffset, horizontalAnim, scrollOffset, size]);\n\n  const extraStyle = useMemo(() => {\n    return horizontal ? { width: size } : { height: size };\n  }, [horizontal, size])\n\n  return (\n    <Animated.View\n      pointerEvents={activeKey ? \"auto\" : \"none\"}\n      style={[StyleSheet.absoluteFill, animStyle, extraStyle]}\n    >\n      {!activeItem || activeIndex === undefined\n        ? null\n        : renderPlaceholder?.({ item: activeItem, index: activeIndex })}\n    </Animated.View>\n  );\n}\n\nexport default typedMemo(PlaceholderItem);\n"],"mappings":"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","ignoreList":[]}