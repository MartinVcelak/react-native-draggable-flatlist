{"version":3,"names":["_react","_interopRequireWildcard","require","_draggableFlatListContext","_refContext","_useStableCallback","_utils","_excluded","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","RowItem","props","propsRef","useRef","current","_useDraggableFlatList","useDraggableFlatListContext","activeKey","activeKeyRef","_useRefs","useRefs","keyToIndexRef","drag","useStableCallback","_propsRef$current","itemKey","debug","console","log","renderItem","item","extraData","getIndex","createElement","MemoizedInner","isActive","__self","__source","fileName","lineNumber","columnNumber","_default","exports","typedMemo","Inner","_ref","rest","_objectWithoutProperties2","assign"],"sources":["RowItem.tsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport { RenderItem } from \"../types\";\nimport { typedMemo } from \"../utils\";\n\ntype Props<T> = {\n  extraData?: any;\n  drag: (itemKey: string) => void;\n  item: T;\n  renderItem: RenderItem<T>;\n  itemKey: string;\n  debug?: boolean;\n};\n\nfunction RowItem<T>(props: Props<T>) {\n  const propsRef = useRef(props);\n  propsRef.current = props;\n\n  const { activeKey } = useDraggableFlatListContext();\n  const activeKeyRef = useRef(activeKey);\n  activeKeyRef.current = activeKey;\n  const { keyToIndexRef } = useRefs();\n\n  const drag = useStableCallback(() => {\n    const { drag, itemKey, debug } = propsRef.current;\n    if (activeKeyRef.current) {\n      // already dragging an item, noop\n      if (debug)\n        console.log(\n          \"## attempt to drag item while another item is already active, noop\"\n        );\n    }\n    drag(itemKey);\n  });\n\n  const { renderItem, item, itemKey, extraData } = props;\n\n  const getIndex = useStableCallback(() => {\n    return keyToIndexRef.current.get(itemKey);\n  });\n\n  return (\n    <MemoizedInner\n      isActive={activeKey === itemKey}\n      drag={drag}\n      renderItem={renderItem}\n      item={item}\n      getIndex={getIndex}\n      extraData={extraData}\n    />\n  );\n}\n\nexport default typedMemo(RowItem);\n\ntype InnerProps<T> = {\n  isActive: boolean;\n  item: T;\n  getIndex: () => number | undefined;\n  drag: () => void;\n  renderItem: RenderItem<T>;\n  extraData?: any;\n};\n\nfunction Inner<T>({ renderItem, extraData, ...rest }: InnerProps<T>) {\n  return renderItem({ ...rest }) as JSX.Element;\n}\n\nconst MemoizedInner = typedMemo(Inner);\n"],"mappings":"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","ignoreList":[]}