{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeGestureHandler","_reactNativeReanimated","_interopRequireWildcard","_nestableScrollContainerContext","_useStableCallback","_jsxFileName","_this","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","AnimatedScrollView","Animated","createAnimatedComponent","ScrollView","NestableScrollContainerInner","props","_useSafeNestableScrol","useSafeNestableScrollContainerContext","outerScrollOffset","containerSize","scrollViewSize","scrollableRef","outerScrollEnabled","onScroll","useAnimatedScrollHandler","_f","_ref","contentOffset","value","y","_closure","asString","__workletHash","__location","onLayout","useStableCallback","event","layout","nativeEvent","height","onContentSizeChange","w","h","createElement","_extends2","scrollEnabled","ref","scrollEventThrottle","__self","__source","fileName","lineNumber","columnNumber","NestableScrollContainer","exports","React","forwardRef","forwardedRef","NestableScrollContainerProvider","undefined"],"sources":["NestableScrollContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { LayoutChangeEvent, ScrollViewProps } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport Animated, { useAnimatedScrollHandler } from \"react-native-reanimated\";\nimport {\n  NestableScrollContainerProvider,\n  useSafeNestableScrollContainerContext,\n} from \"../context/nestableScrollContainerContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\n\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\nfunction NestableScrollContainerInner(props: ScrollViewProps) {\n  const {\n    outerScrollOffset,\n    containerSize,\n    scrollViewSize,\n    scrollableRef,\n    outerScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  const onScroll = useAnimatedScrollHandler({\n    onScroll: ({ contentOffset }) => {\n      outerScrollOffset.value = contentOffset.y;\n    },\n  });\n\n  const onLayout = useStableCallback((event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: { layout },\n    } = event;\n    containerSize.value = layout.height;\n  });\n\n  const onContentSizeChange = useStableCallback((w: number, h: number) => {\n    scrollViewSize.value = h;\n    props.onContentSizeChange?.(w, h);\n  });\n\n  return (\n    <AnimatedScrollView\n      {...props}\n      onLayout={onLayout}\n      onContentSizeChange={onContentSizeChange}\n      scrollEnabled={outerScrollEnabled}\n      ref={scrollableRef}\n      scrollEventThrottle={1}\n      onScroll={onScroll}\n    />\n  );\n}\n\nexport const NestableScrollContainer = React.forwardRef(\n  (props: ScrollViewProps, forwardedRef?: React.ForwardedRef<ScrollView>) => {\n    return (\n      <NestableScrollContainerProvider\n        forwardedRef={\n          (forwardedRef as React.MutableRefObject<ScrollView>) || undefined\n        }\n      >\n        <NestableScrollContainerInner {...props} />\n      </NestableScrollContainerProvider>\n    );\n  }\n);\n"],"mappings":"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","ignoreList":[]}